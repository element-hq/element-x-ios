name: UnitTests

schemes:
  UnitTests:
    analyze:
      config: Debug
    archive:
      config: Release
    build:
      targets:
        UnitTests: all
    profile:
      config: Release
    run:
      config: Debug
      disableMainThreadChecker: true
      environmentVariables:
        IS_RUNNING_UNIT_TESTS: "1"
    test:
      config: Debug
      disableMainThreadChecker: true
      captureScreenshotsAutomatically: false
      gatherCoverageData: true
      targets:
      - UnitTests

targets:
  UnitTests:
    type: bundle.unit-test
    platform: iOS

    dependencies:
    - target: ElementX

    info:
      path: ../SupportingFiles/Info.plist

    settings:
      base:
        PRODUCT_NAME: UnitTests
        PRODUCT_BUNDLE_IDENTIFIER: io.element.elementx.unit.tests
      debug:
      release:

    sources:
    - path: ../Sources
    - path: ../SupportingFiles
    - path: ../../Tools/Scripts/Templates/SimpleScreenExample/Tests/Unit
    - path: ../Resources
    - path: ../../ElementX/Sources/BuildSettings.swift
    - path: ../../ElementX/Sources/Screens/RoomScreen/View/Style/TimelineStyle.swift
